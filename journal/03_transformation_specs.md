# üìÑ Technical Spec: Time Transformation Module (TTM)

## 1. Overview
–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç "–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö" —Å–¥–≤–∏–≥–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞) –∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ DST (–ª–µ—Ç–Ω–µ–µ/–∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è).

## 2. Technology Stack
* **Core Libraries:** 
    * `zoneinfo`: –ù–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å IANA-–±–∞–∑–æ–π (—Å—Ç–∞–Ω–¥–∞—Ä—Ç PEP 615).
    * `tzdata`: –ü–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö.

## 3. Core Architecture: "UTC-Pivot"
–õ—é–±–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ "–Ω—É–ª–µ–≤—É—é —Ç–æ—á–∫—É" (UTC). –ü—Ä—è–º–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∑–æ–Ω–∞–º–∏ (¬´–ü–æ—è—Å –ê -> –ü–æ—è—Å –ë¬ª) –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫.

```
    Local Time          UTC              Target Zones
    (sender)                            
        ‚îÇ                ‚îÇ                    
   "14:00"               ‚îÇ                    
   Berlin üá©üá™             ‚îÇ                    
        ‚îÇ                ‚îÇ                    
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ 13:00 UTC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚ñ∂ 08:00 New York üá∫üá∏
                         ‚îÇ         ‚îÇ
                         ‚îÇ         ‚îú‚îÄ‚ñ∂ 22:00 Tokyo üáØüáµ
                         ‚îÇ         ‚îÇ
                         ‚îÇ         ‚îî‚îÄ‚ñ∂ 13:00 London üá¨üáß
```

### Workflow:
1. **Extraction**: –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç capture_module
2. **Anchoring**: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–µ (`datetime.now()`) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ DST.
3. **Localization**: –°–æ–∑–¥–∞–Ω–∏–µ `Aware datetime` –æ–±—ä–µ–∫—Ç–∞ –≤ –∑–æ–Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.
4. **Normalization**: –°–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ **UTC** (—Ç–æ—á–∫–∞ –æ—Ç—Å—á–µ—Ç–∞).
5. **Projection**: –°–º–µ—â–µ–Ω–∏–µ –∏–∑ UTC –≤ —Å–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–≤—ã—Ö –∑–æ–Ω (`target_timezone_names`).


## 4. Maintenance & Data Integrity
–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–∑–∞—â–∏—Ç–∞ –æ—Ç –≤–Ω–µ–∑–∞–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ–º):

* **Update Strategy**: –ü–∞–∫–µ—Ç `tzdata` –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ Docker-–æ–±—Ä–∞–∑–∞ –∏ —Ä–∞–∑ –≤ 24 —á–∞—Å–∞ –≤ Runtime. 
* **Command**: `uv pip install --upgrade tzdata`.
* **Storage Policy**: –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (SQLite) —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ **IANA –∏–º–µ–Ω–∞** (–Ω–∞–ø—Ä. `Europe/Moscow`). –•—Ä–∞–Ω–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤—ã—Ö —Å–º–µ—â–µ–Ω–∏–π (–Ω–∞–ø—Ä. `+3`) —Å—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ.

